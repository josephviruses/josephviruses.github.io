<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Hugo 0.55.6" />


<title>An attempt at analyzing the TCEC Season 15 SuFi openings - Musings Online Chess</title>
<meta property="og:title" content="An attempt at analyzing the TCEC Season 15 SuFi openings - Musings Online Chess">


  <link href='/favicon.ico' rel='icon' type='image/x-icon'/>



  








<link href='//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css' rel='stylesheet' type='text/css' />



<link rel="stylesheet" href="/css/fonts.css" media="all">
<link rel="stylesheet" href="/css/main.css" media="all">



  </head>
  <body>
    <div class="wrapper">
      <header class="header">
        <nav class="nav">
  <a href="/" class="nav-logo">
    <img src="/images/logo.png"
         width="50"
         height="50"
         alt="Logo">
  </a>

  <ul class="nav-links">
    
    <li><a href="/about/">About</a></li>
    
    <li><a href="https://github.com/rstudio/blogdown">GitHub</a></li>
    
    <li><a href="https://twitter.com/rstudio">Twitter</a></li>
    
  </ul>
</nav>

      </header>


<main class="content" role="main">

  <article class="article">
    
    <span class="article-duration">7 min read</span>
    

    <h1 class="article-title">An attempt at analyzing the TCEC Season 15 SuFi openings</h1>

    
    <span class="article-date">2015-07-23</span>
    

    <div class="article-content">
      
<script src="/rmarkdown-libs/htmlwidgets/htmlwidgets.js"></script>
<script src="/rmarkdown-libs/jquery/jquery.min.js"></script>
<link href="/rmarkdown-libs/datatables-css/datatables-crosstalk.css" rel="stylesheet" />
<script src="/rmarkdown-libs/datatables-binding/datatables.js"></script>
<link href="/rmarkdown-libs/dt-core/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="/rmarkdown-libs/dt-core/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="/rmarkdown-libs/dt-core/js/jquery.dataTables.min.js"></script>
<link href="/rmarkdown-libs/crosstalk/css/crosstalk.css" rel="stylesheet" />
<script src="/rmarkdown-libs/crosstalk/js/crosstalk.min.js"></script>


<p>My aim here is to try to analyze and make sense of what happened in the TCEC Seasono 15 SuFi, based on the ECO group of openings. Based on Jeroen Noomen’s <a href="http://blogchess2016.blogspot.com/2019/04/opening-selection-tcec-15-superfinal.html">blog</a>, the following are the intended openings:</p>
<pre><code>ECO code distribution
ECO A: 15 lines
ECO B: 14 lines
ECO C: 11 lines
ECO D: 3 lines
ECO E: 7 lines</code></pre>
<p>However, the ECO code distribution may have changed because of some transpositions. I have stored the results of the TCEC Season 15 SuFi <a href="%22./leelasf2.csv%22">here</a>.</p>
<pre class="r"><code>library(tidyverse)
library(elo)
library(knitr)
library(DT)
data &lt;- read_delim(&quot;./leelasf2.csv&quot;, delim = &quot;;&quot;)
data %&gt;% datatable()</code></pre>
<div id="htmlwidget-1" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"filter":"none","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100"],[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100],["SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela"],["Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF"],[0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,1,0.5,0,0.5,0.5,0.5,1,0.5,1,0.5,0.5,0.5,0.5,0.5,1,0.5,1,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,1,1,0.5,1,1,1,0.5,0.5,1,0.5,1,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0,1,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,1,1,0.5,0.5,0.5,1,1,1,0.5,0.5,0.5,0.5,0.5,1,0.5,0.5,0.5,0.5,0.5,0.5],[0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0,0.5,1,0.5,0.5,0.5,0,0.5,0,0.5,0.5,0.5,0.5,0.5,0,0.5,0,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0,0,0.5,0,0,0,0.5,0.5,0,0.5,0,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,1,0,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0,0,0.5,0.5,0.5,0,0,0,0.5,0.5,0.5,0.5,0.5,0,0.5,0.5,0.5,0.5,0.5,0.5],["E73","E73","B84","B84","A80","A80","C37","C37","A60","A67","C05","C05","A30","A30","B06","B06","E97","E97","B69","B69","D31","D31","C92","C92","E15","E15","B01","B01","A50","A50","C52","C52","E83","E84","B90","B90","A21","A21","C19","C19","E94","A55","C57","C57","A50","A50","B12","B12","E92","E92","B21","B21","A92","A92","B06","B06","A77","A77","C21","C21","A45","A45","C03","C03","E71","E71","B48","B48","D43","D43","C25","C25","A59","A58","B07","B07","C50","E06","C75","C75","E87","E88","B76","B76","A89","A89","A42","E94","A61","A61","C33","C33","D02","D02","C13","C13","E98","E98","B45","B45"],[13,13,30,30,3,3,8,8,6,6,17,17,22,22,8,8,22,22,13,13,14,14,24,24,21,21,4,4,4,4,17,17,12,12,22,22,16,16,16,16,8,8,10,10,6,6,16,16,17,17,15,15,10,10,6,6,22,22,9,9,13,13,15,15,13,13,18,18,24,24,6,6,12,12,9,9,0,0,10,10,12,12,28,28,14,14,6,6,19,19,7,7,4,4,11,11,20,20,14,14],[0.79,1.28,0.42,0.43,0.81,0.84,-1.16,-1.06,1.2,1.17,0.35,0.38,0.58,0.72,1.3,1.38,1.1,1.57,0.66,0.68,0.66,0.7,0.91,1.1,0.88,0.9,1.1,1.13,0.95,0.98,-0.3,-0.31,0.73,0.79,0.99,1,0.73,0.75,1.41,1.5,1.15,1.18,1.37,1.42,0.83,0.84,0.55,0.62,0.84,0.86,-0.86,-0.78,0.99,1.02,1.25,1.27,1.13,1.11,-1.21,-0.64,0.74,0.83,0.72,0.68,0.71,0.71,0.83,0.96,0.54,0.57,-0.76,-0.77,1.51,1.53,0.77,1.1,0.34,0.37,0.76,0.77,0.99,1.04,0.67,1.18,1.58,1.6,0.82,0.85,1.25,1.16,-1.01,-0.94,0.96,0.98,0.64,0.61,0.55,0.58,1.17,1.54],[1.01,0.43,0.72,0.32,0.56,0.24,-0.36,-1.05,0.83,0.34,0.52,0.09,0.95,0.36,1.01,0.61,1.43,0.72,0.62,0.19,0.53,0,0.98,0.21,0.73,0.32,0.75,0.42,0.66,0.33,0,-0.61,0.74,0.24,0.79,0.32,0.68,0,0.96,0.57,0.8,0.66,0.8,0.65,0.68,0.41,0.75,0,0.97,0.27,-0.64,-0.94,0.86,0.52,0.92,0.5,1.14,0.49,-0.27,-0.76,0.95,0.28,0.54,0.16,0.79,0.37,0.82,0.28,0.49,0,0,-0.81,1,0.52,0.77,0.32,0.62,0,0.76,0.3,0.81,0.51,0.58,0.38,0.94,0.42,0.69,0.17,0.97,0.48,-0.22,-0.94,0.74,0.39,0.51,0,1.16,0.56,0.96,0.5]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Opening<\/th>\n      <th>White<\/th>\n      <th>Black<\/th>\n      <th>points.White<\/th>\n      <th>points.Black<\/th>\n      <th>ECO1<\/th>\n      <th>plies<\/th>\n      <th>Leela.openeval<\/th>\n      <th>SF.openeval<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,4,5,7,8,9]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<p>First, let’s estimate the ELO differences between Leela and Stockfish after every game. Initially, the estimated ELO’s are 3589 for Leela and 3587 for Stockfish.</p>
<p>Let <span class="math inline">\(R_A\)</span> be the ELO of engine <span class="math inline">\(A\)</span> and <span class="math inline">\(R_B\)</span> be the rating of engine <span class="math inline">\(B\)</span>. Then the expected result for engine A against B is given by the logistic equation:</p>
<p><span class="math display">\[\begin{equation}
E_A = \frac{1}{1+10^{(R_A-R_B)/400}}.
\end{equation}\]</span></p>
<p>Solving this equation for <span class="math inline">\(R_A-R_B\)</span>, we have:</p>
<p><span class="math display">\[\begin{equation}
elodiff = R_A-R_B = 400\log_{10}\left( \frac{1-E_A}{E_A}\right)
\end{equation}\]</span></p>
<p>Here we note that <span class="math inline">\((1-E_A)/E_A\)</span> can be expressed as win ratio / loss ratio without loss of generality. That is, we can put the win ratio of the leading engine in the numerator and we get the same result. The win ratio is the sum of the wins and draws.</p>
<p>In R, there is a package called <a href="https://CRAN.R-project.org/package=elo"><code>elo</code></a> which we will also use here. But we can write our own functions for this purpose.</p>
<pre class="r"><code>elo &lt;- function(win_ratio) {400 * log10(win_ratio / (1-win_ratio))}</code></pre>
<p>We can also check for the standard errors of ELO differences using a normal approximation to the binomial distribution.</p>
<pre class="r"><code>denom95 &lt;- function(win_ratio, total) qnorm(0.975) * sqrt(win_ratio * (1-win_ratio)/(total-1))</code></pre>
<p>We can also compute for the LOS as described in the <a href="https://www.chessprogramming.org/Match_Statistics">chessprogramming wiki site</a>. I used three estimators here. <code>LOS3</code> might become untenable with large data sets, but we only have 100 rows of data here so it will be fine.</p>
<pre class="r"><code>LOS &lt;- function(wins_losses, total) pnorm(total/2, sd = wins_losses)
LOS2 &lt;- function(wins, losses) pnorm((wins-losses)/sqrt(wins+losses))
LOS3 &lt;- function(wins, losses, draws) {
  total = wins + losses + draws
  exp = (wins/total)^wins * (losses/total)^losses * (draws/total)^draws
  factorials = factorial(total)/(factorial(wins)*factorial(losses)*factorial(draws))
  P = factorials * exp
  1-P
}</code></pre>
<p>We will now extract the initials of the ECO codes, determin the points of Leela and SF after each game, the win rate (by the leading engine) after each game, the estimated ELO difference (<code>elodiff</code>) after each game, and the three LOS estimates after each game.</p>
<pre class="r"><code>data &lt;- data %&gt;%
  mutate(ECO2 = substr(ECO1, start = 1, stop = 1)) %&gt;%
  # calculate Leela&#39;s scores
  mutate(points.Leela = (White == &quot;Leela&quot;) * points.White + (Black == &quot;Leela&quot;) * points.Black) %&gt;%
  # calculate SF&#39;s scores
  mutate(points.SF = (White == &quot;SF&quot;) * points.White + (Black == &quot;SF&quot;) * points.Black) %&gt;%
  mutate(results.Leela = case_when(points.Leela == 1~&quot;Win&quot;, 
                                   points.Leela == 0.5~&quot;Draw&quot;,
                                   points.Leela == 0~&quot;Loss&quot;)) %&gt;%
  mutate(results.SF = case_when(points.SF == 1~&quot;Win&quot;, 
                                   points.SF == 0.5~&quot;Draw&quot;,
                                   points.SF == 0~&quot;Loss&quot;)) %&gt;%
  # calculate cumulative scores
  mutate(Score.Leela = cumsum(points.Leela)) %&gt;%
  mutate(Score.SF = cumsum(points.SF)) %&gt;%
  mutate(total = row_number()) %&gt;%
  mutate(draw_ratio = cumsum(points.Leela == points.SF)/total) %&gt;%
  mutate(wins.Leela = cumsum(results.Leela==&quot;Win&quot;)) %&gt;%
  mutate(losses.Leela = cumsum(results.Leela==&quot;Loss&quot;)) %&gt;%
  mutate(wins.SF = cumsum(results.SF==&quot;Win&quot;)) %&gt;%
  mutate(losses.SF = cumsum(results.SF==&quot;Loss&quot;)) %&gt;%
  mutate(Draws = cumsum(results.Leela==&quot;Draw&quot;)) %&gt;%
  # calculate win rate of Leela
  mutate(win_rate.Leela = Score.Leela/total) %&gt;%
  mutate(elodiff = elo(win_rate.Leela)) %&gt;%
  # calculate ELO&#39;s and LOS&#39;s
  mutate(SE = elo(win_rate.Leela + denom95(win_rate.Leela, total))-elodiff) %&gt;%
  mutate(LOS = LOS(total*(1-draw_ratio), total)) %&gt;%
  mutate(LOS2 = LOS2(wins.Leela, losses.Leela)) %&gt;%
  mutate(LOS3 = LOS3(wins.Leela, losses.Leela, Draws)) 
data %&gt;% 
  select(-White, -Black, -points.White, -points.Black, -Leela.openeval, -SF.openeval) %&gt;% 
  datatable()</code></pre>
<div id="htmlwidget-2" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-2">{"x":{"filter":"none","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100"],[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100],["E73","E73","B84","B84","A80","A80","C37","C37","A60","A67","C05","C05","A30","A30","B06","B06","E97","E97","B69","B69","D31","D31","C92","C92","E15","E15","B01","B01","A50","A50","C52","C52","E83","E84","B90","B90","A21","A21","C19","C19","E94","A55","C57","C57","A50","A50","B12","B12","E92","E92","B21","B21","A92","A92","B06","B06","A77","A77","C21","C21","A45","A45","C03","C03","E71","E71","B48","B48","D43","D43","C25","C25","A59","A58","B07","B07","C50","E06","C75","C75","E87","E88","B76","B76","A89","A89","A42","E94","A61","A61","C33","C33","D02","D02","C13","C13","E98","E98","B45","B45"],[13,13,30,30,3,3,8,8,6,6,17,17,22,22,8,8,22,22,13,13,14,14,24,24,21,21,4,4,4,4,17,17,12,12,22,22,16,16,16,16,8,8,10,10,6,6,16,16,17,17,15,15,10,10,6,6,22,22,9,9,13,13,15,15,13,13,18,18,24,24,6,6,12,12,9,9,0,0,10,10,12,12,28,28,14,14,6,6,19,19,7,7,4,4,11,11,20,20,14,14],["E","E","B","B","A","A","C","C","A","A","C","C","A","A","B","B","E","E","B","B","D","D","C","C","E","E","B","B","A","A","C","C","E","E","B","B","A","A","C","C","E","A","C","C","A","A","B","B","E","E","B","B","A","A","B","B","A","A","C","C","A","A","C","C","E","E","B","B","D","D","C","C","A","A","B","B","C","E","C","C","E","E","B","B","A","A","A","E","A","A","C","C","D","D","C","C","E","E","B","B"],[0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,1,0.5,0,0.5,0.5,0.5,1,0.5,1,0.5,0.5,0.5,0.5,0.5,1,0.5,1,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0,1,0.5,1,0,1,0.5,0.5,0,0.5,0,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,1,1,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0,1,0.5,0.5,0.5,1,0,1,0.5,0.5,0.5,0.5,0.5,1,0.5,0.5,0.5,0.5,0.5,0.5],[0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0,0.5,1,0.5,0.5,0.5,0,0.5,0,0.5,0.5,0.5,0.5,0.5,0,0.5,0,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,1,0,0.5,0,1,0,0.5,0.5,1,0.5,1,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0,0,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,1,0,0.5,0.5,0.5,0,1,0,0.5,0.5,0.5,0.5,0.5,0,0.5,0.5,0.5,0.5,0.5,0.5],["Draw","Draw","Draw","Draw","Draw","Draw","Draw","Draw","Draw","Win","Draw","Loss","Draw","Draw","Draw","Win","Draw","Win","Draw","Draw","Draw","Draw","Draw","Win","Draw","Win","Draw","Draw","Draw","Draw","Draw","Draw","Draw","Draw","Loss","Win","Draw","Win","Loss","Win","Draw","Draw","Loss","Draw","Loss","Draw","Draw","Draw","Draw","Draw","Draw","Draw","Draw","Draw","Draw","Draw","Draw","Draw","Draw","Draw","Win","Win","Draw","Draw","Draw","Draw","Draw","Draw","Draw","Draw","Draw","Draw","Draw","Draw","Draw","Draw","Draw","Draw","Draw","Draw","Loss","Win","Draw","Draw","Draw","Win","Loss","Win","Draw","Draw","Draw","Draw","Draw","Win","Draw","Draw","Draw","Draw","Draw","Draw"],["Draw","Draw","Draw","Draw","Draw","Draw","Draw","Draw","Draw","Loss","Draw","Win","Draw","Draw","Draw","Loss","Draw","Loss","Draw","Draw","Draw","Draw","Draw","Loss","Draw","Loss","Draw","Draw","Draw","Draw","Draw","Draw","Draw","Draw","Win","Loss","Draw","Loss","Win","Loss","Draw","Draw","Win","Draw","Win","Draw","Draw","Draw","Draw","Draw","Draw","Draw","Draw","Draw","Draw","Draw","Draw","Draw","Draw","Draw","Loss","Loss","Draw","Draw","Draw","Draw","Draw","Draw","Draw","Draw","Draw","Draw","Draw","Draw","Draw","Draw","Draw","Draw","Draw","Draw","Win","Loss","Draw","Draw","Draw","Loss","Win","Loss","Draw","Draw","Draw","Draw","Draw","Loss","Draw","Draw","Draw","Draw","Draw","Draw"],[0.5,1,1.5,2,2.5,3,3.5,4,4.5,5.5,6,6,6.5,7,7.5,8.5,9,10,10.5,11,11.5,12,12.5,13.5,14,15,15.5,16,16.5,17,17.5,18,18.5,19,19,20,20.5,21.5,21.5,22.5,23,23.5,23.5,24,24,24.5,25,25.5,26,26.5,27,27.5,28,28.5,29,29.5,30,30.5,31,31.5,32.5,33.5,34,34.5,35,35.5,36,36.5,37,37.5,38,38.5,39,39.5,40,40.5,41,41.5,42,42.5,42.5,43.5,44,44.5,45,46,46,47,47.5,48,48.5,49,49.5,50.5,51,51.5,52,52.5,53,53.5],[0.5,1,1.5,2,2.5,3,3.5,4,4.5,4.5,5,6,6.5,7,7.5,7.5,8,8,8.5,9,9.5,10,10.5,10.5,11,11,11.5,12,12.5,13,13.5,14,14.5,15,16,16,16.5,16.5,17.5,17.5,18,18.5,19.5,20,21,21.5,22,22.5,23,23.5,24,24.5,25,25.5,26,26.5,27,27.5,28,28.5,28.5,28.5,29,29.5,30,30.5,31,31.5,32,32.5,33,33.5,34,34.5,35,35.5,36,36.5,37,37.5,38.5,38.5,39,39.5,40,40,41,41,41.5,42,42.5,43,43.5,43.5,44,44.5,45,45.5,46,46.5],[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100],[1,1,1,1,1,1,1,1,1,0.9,0.909090909090909,0.833333333333333,0.846153846153846,0.857142857142857,0.866666666666667,0.8125,0.823529411764706,0.777777777777778,0.789473684210526,0.8,0.80952380952381,0.818181818181818,0.826086956521739,0.791666666666667,0.8,0.769230769230769,0.777777777777778,0.785714285714286,0.793103448275862,0.8,0.806451612903226,0.8125,0.818181818181818,0.823529411764706,0.8,0.777777777777778,0.783783783783784,0.763157894736842,0.743589743589744,0.725,0.731707317073171,0.738095238095238,0.720930232558139,0.727272727272727,0.711111111111111,0.717391304347826,0.723404255319149,0.729166666666667,0.73469387755102,0.74,0.745098039215686,0.75,0.754716981132076,0.759259259259259,0.763636363636364,0.767857142857143,0.771929824561403,0.775862068965517,0.779661016949153,0.783333333333333,0.770491803278688,0.758064516129032,0.761904761904762,0.765625,0.769230769230769,0.772727272727273,0.776119402985075,0.779411764705882,0.782608695652174,0.785714285714286,0.788732394366197,0.791666666666667,0.794520547945205,0.797297297297297,0.8,0.802631578947368,0.805194805194805,0.807692307692308,0.810126582278481,0.8125,0.802469135802469,0.792682926829268,0.795180722891566,0.797619047619048,0.8,0.790697674418605,0.781609195402299,0.772727272727273,0.775280898876405,0.777777777777778,0.78021978021978,0.782608695652174,0.78494623655914,0.776595744680851,0.778947368421053,0.78125,0.783505154639175,0.785714285714286,0.787878787878788,0.79],[0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,2,2,3,3,3,3,3,3,4,4,5,5,5,5,5,5,5,5,5,5,6,6,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,11,11,11,11,12,12,13,13,13,13,13,13,14,14,14,14,14,14,14],[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,3,3,3,3,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7],[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,3,3,3,3,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7],[0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,2,2,3,3,3,3,3,3,4,4,5,5,5,5,5,5,5,5,5,5,6,6,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,11,11,11,11,12,12,13,13,13,13,13,13,14,14,14,14,14,14,14],[1,2,3,4,5,6,7,8,9,9,10,10,11,12,13,13,14,14,15,16,17,18,19,19,20,20,21,22,23,24,25,26,27,28,28,28,29,29,29,29,30,31,31,32,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,47,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,65,65,66,67,68,68,68,68,69,70,71,72,73,73,74,75,76,77,78,79],[0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.55,0.545454545454545,0.5,0.5,0.5,0.5,0.53125,0.529411764705882,0.555555555555556,0.552631578947368,0.55,0.547619047619048,0.545454545454545,0.543478260869565,0.5625,0.56,0.576923076923077,0.574074074074074,0.571428571428571,0.568965517241379,0.566666666666667,0.564516129032258,0.5625,0.560606060606061,0.558823529411765,0.542857142857143,0.555555555555556,0.554054054054054,0.565789473684211,0.551282051282051,0.5625,0.560975609756098,0.55952380952381,0.546511627906977,0.545454545454545,0.533333333333333,0.532608695652174,0.531914893617021,0.53125,0.530612244897959,0.53,0.529411764705882,0.528846153846154,0.528301886792453,0.527777777777778,0.527272727272727,0.526785714285714,0.526315789473684,0.525862068965517,0.525423728813559,0.525,0.532786885245902,0.540322580645161,0.53968253968254,0.5390625,0.538461538461538,0.537878787878788,0.537313432835821,0.536764705882353,0.536231884057971,0.535714285714286,0.535211267605634,0.534722222222222,0.534246575342466,0.533783783783784,0.533333333333333,0.532894736842105,0.532467532467532,0.532051282051282,0.531645569620253,0.53125,0.524691358024691,0.530487804878049,0.530120481927711,0.529761904761905,0.529411764705882,0.534883720930233,0.528735632183908,0.534090909090909,0.533707865168539,0.533333333333333,0.532967032967033,0.532608695652174,0.532258064516129,0.537234042553192,0.536842105263158,0.536458333333333,0.536082474226804,0.535714285714286,0.535353535353535,0.535],[0,0,0,0,0,0,0,0,0,34.8600702875601,31.6724984190499,0,0,0,0,21.7430649290371,20.4610089789525,38.7640052032226,36.7081493422582,34.8600702875601,33.1896940259056,31.6724984190499,30.2882855752473,43.6577877700272,41.8941402080052,53.8794295589824,51.8535431266719,49.97549464332,48.22957248234,46.6022276285749,45.0817120765154,43.6577877700272,42.3214904672155,41.0649367588591,29.8534473187616,38.7640052032226,37.7079667367392,45.9818062806796,35.7601644917244,43.6577877700272,42.5821323657148,41.558453547489,32.4133003636873,31.6724984190499,23.1967787910747,22.6910497795709,22.2069311399325,21.7430649290371,21.2982047812901,20.8712046660287,20.4610089789525,20.0666437862921,19.6872090680726,19.321871829822,18.9698599712552,18.6304568165421,18.30299622427,17.9868582066093,17.6814649968214,17.3862775124361,22.8154003881457,28.079978811334,27.6323676573196,27.1988316380444,26.7787158522453,26.3714054833233,25.9763227732058,25.5929242667497,25.2206982988356,24.8591626995378,24.5078626955691,24.1663689886622,23.8342759936977,23.5112002212744,23.1967787910747,22.8906680638298,22.5925423809792,22.3020929022472,22.0190265323621,21.7430649290371,17.1712802167243,21.2114109784547,20.9552277838753,20.7051661417885,20.4610089789525,24.2791361414446,19.9895899847354,23.7256004863928,23.4582051651095,23.1967787910747,22.9411234207808,22.6910497795709,22.4463767915725,25.9208484656096,25.6469998446996,25.3788872241038,25.1163319437822,24.8591626995378,24.607215167686,24.3603316525098],[null,null,null,null,798.096155119703,472.706440112637,381.843696283141,330.843053333851,296.575290063887,303.216087167976,275.265433838021,235.952788361352,222.814942693168,211.673781314048,202.066160753224,201.981979773412,193.375144943175,193.252370855582,185.530755212228,178.691522553792,172.576783126177,167.065731104536,162.064125138473,161.609390392269,157.00896507969,156.601149334711,152.357353491045,148.452996624408,144.844596241855,141.496112749769,138.377387191278,135.462961766657,132.731177066597,130.163472468239,125.947380842823,125.45837915275,123.294971641833,122.853428059277,119.293028408238,118.8570433215,117.004477138315,115.238704474128,112.36071814186,110.813109852341,108.339928296169,106.964749709918,105.64156052724,104.36713168838,103.138509841892,101.952987686628,100.808078130465,99.7014916978317,98.6311167134793,97.5950018675984,96.5913408308375,95.6184586399403,94.6747996177622,93.7589166270898,92.8694614873745,92.0051764082906,91.6599899723635,91.3331941052818,90.5028082047254,89.6951311230673,88.9091334737488,88.143850529648,87.3983770694572,86.6718627186876,85.9635077300809,85.2725591552032,84.5983073650088,83.9400828823334,83.2972534937461,82.6692216120513,82.0554218640895,81.4553188813998,80.8684052738496,80.2941997685572,79.7322454983747,79.1821084259056,78.3640768710588,78.115655267217,77.5985727271054,77.091772090795,76.59491376628,76.3649133141856,75.6297427838693,75.4052271408989,74.9389768658608,74.4814089492327,74.0322543185099,73.5912555186314,73.1581660716935,72.9538439777136,72.5307024846486,72.1149689111351,71.7064270540755,71.3048695129817,70.9100972320037,70.5219190708524],[1,1,1,1,1,1,1,1,1,0.999999713348428,0.999999981010438,0.99865010196837,0.999422974957609,0.999767370920964,0.999911582714799,0.99616961943241,0.997696733868304,0.987775527344955,0.991225524904262,0.993790334674224,0.995667551636987,0.997020236764945,0.997979862510054,0.991802464075404,0.993790334674224,0.984869859989764,0.987775527344955,0.990184671371355,0.992168323178551,0.993790334674224,0.995107463397765,0.99616961943241,0.997020236764945,0.997696733868304,0.993790334674224,0.987775527344955,0.989624927341942,0.982618618688886,0.974411940478361,0.965481826002792,0.968813606276128,0.971874817359017,0.963406811452511,0.966623492415183,0.958253534079091,0.96157231432404,0.964672798761597,0.96756506486002,0.970259108149841,0.972764804986261,0.975091878542342,0.977249868051821,0.979248101291326,0.981095670264809,0.982801410028381,0.984373880571531,0.985821351651,0.987151790456374,0.988372851971822,0.989491871886241,0.985318239695703,0.980617212911181,0.982135579437183,0.983551304177255,0.984869859989764,0.986096552486501,0.987236514541022,0.988294701919442,0.989275889978324,0.990184671371355,0.991025454704217,0.991802464075404,0.99251973943961,0.993181137729824,0.993790334674224,0.994350827244439,0.99486593667265,0.995338811976281,0.995772433930719,0.99616961943241,0.994317159630751,0.992062238442095,0.99268025045852,0.993255448135986,0.993790334674224,0.991550293787749,0.988974077394869,0.986096552486501,0.98695938092646,0.987775527344955,0.988547035083885,0.989275889978324,0.989964019899726,0.987392577434318,0.988148355946615,0.988864510520384,0.989542733987312,0.990184671371355,0.990791919711848,0.991366028001912],[null,null,null,null,null,null,null,null,null,0.841344746068543,0.841344746068543,0.5,0.5,0.5,0.5,0.718148569174613,0.718148569174613,0.841344746068543,0.841344746068543,0.841344746068543,0.841344746068543,0.841344746068543,0.841344746068543,0.9101437525605,0.9101437525605,0.948764782570125,0.948764782570125,0.948764782570125,0.948764782570125,0.948764782570125,0.948764782570125,0.948764782570125,0.948764782570125,0.948764782570125,0.871580371021072,0.921350396474857,0.921350396474857,0.952209647727185,0.897048394633966,0.934165991988593,0.934165991988593,0.934165991988593,0.875893460505038,0.875893460505038,0.797309721770529,0.797309721770529,0.797309721770529,0.797309721770529,0.797309721770529,0.797309721770529,0.797309721770529,0.797309721770529,0.797309721770529,0.797309721770529,0.797309721770529,0.797309721770529,0.797309721770529,0.797309721770529,0.797309721770529,0.797309721770529,0.857475296298694,0.901647198770527,0.901647198770527,0.901647198770527,0.901647198770527,0.901647198770527,0.901647198770527,0.901647198770527,0.901647198770527,0.901647198770527,0.901647198770527,0.901647198770527,0.901647198770527,0.901647198770527,0.901647198770527,0.901647198770527,0.901647198770527,0.901647198770527,0.901647198770527,0.901647198770527,0.841344746068543,0.887373546819673,0.887373546819673,0.887373546819673,0.887373546819673,0.921350396474857,0.874325445594889,0.9101437525605,0.9101437525605,0.9101437525605,0.9101437525605,0.9101437525605,0.9101437525605,0.936684771026191,0.936684771026191,0.936684771026191,0.936684771026191,0.936684771026191,0.936684771026191,0.936684771026191],[0,0,0,0,0,0,0,0,0,0.612579511,0.614456710570468,0.851953215684308,0.853046289884642,0.85396604708249,0.854750719794118,0.889665042884143,0.890389793782774,0.906667566485794,0.907347318785422,0.907947127303989,0.908480342903681,0.908957494778652,0.909386999682767,0.91929723964461,0.919712214004843,0.9264714415465,0.926870734390285,0.927235909387358,0.927571172173755,0.92788006279923,0.928165582657918,0.928430293386271,0.928676394706136,0.928905786271187,0.946931853099206,0.950735488776662,0.950922638840487,0.953864773560365,0.961315518603542,0.963300476948963,0.963467427712897,0.963624359847911,0.967906142709836,0.968045116599282,0.970976856541607,0.971103056248172,0.971222374847463,0.97133536301695,0.971442513946366,0.971544270676952,0.971641032340634,0.971733159487383,0.971820978652932,0.97190478629066,0.971984852168798,0.972061422316155,0.972134721584985,0.972204955887987,0.97227231415688,0.972336970062231,0.97367278932811,0.974797179864968,0.974860383029295,0.974921164984868,0.974979662749358,0.975036003159789,0.975090303803586,0.975142673849017,0.975193214787509,0.975242021098612,0.975289180846823,0.975334776218368,0.975378884004814,0.975421576039622,0.975462919592882,0.975502977728852,0.975541809630328,0.975579470893389,0.97561601379563,0.975651487540628,0.977572745415339,0.978468838887794,0.978502527614901,0.978535263755052,0.978567087257377,0.979346403142677,0.980729742623602,0.981369895495158,0.981400470357118,0.981430221947694,0.981459183186535,0.98148738525599,0.981514857714541,0.982083733560194,0.982110689372008,0.98213696703261,0.982162591897321,0.982187588069322,0.982211978476209,0.982235784940994]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Opening<\/th>\n      <th>ECO1<\/th>\n      <th>plies<\/th>\n      <th>ECO2<\/th>\n      <th>points.Leela<\/th>\n      <th>points.SF<\/th>\n      <th>results.Leela<\/th>\n      <th>results.SF<\/th>\n      <th>Score.Leela<\/th>\n      <th>Score.SF<\/th>\n      <th>total<\/th>\n      <th>draw_ratio<\/th>\n      <th>wins.Leela<\/th>\n      <th>losses.Leela<\/th>\n      <th>wins.SF<\/th>\n      <th>losses.SF<\/th>\n      <th>Draws<\/th>\n      <th>win_rate.Leela<\/th>\n      <th>elodiff<\/th>\n      <th>SE<\/th>\n      <th>LOS<\/th>\n      <th>LOS2<\/th>\n      <th>LOS3<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,3,5,6,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<p>We see that by game 94, when Leela breached the 50.5 mark, the ELO difference is about 26, but with large error bar. The LOS’s show though that there is very high likelihood that Leela is indeed stronger. At the end of SuFi, the estimated ELO difference is about 24.</p>
<p>The problem with ELO estimates based on results of chess engine tournaments is that each opening has to be played in reverse colors by each engine. Also, there are families of ECO code openings. As such, the ELO differences might actually be biased. Also, the sample size of 100 is actually small, leading to the large error bars.</p>
<p>Instead, we can calculate the ELO differences by ECO family of openings. The estimates will have larger error bars because we now have smaller samples.</p>
<pre class="r"><code>data2 &lt;- data %&gt;%
  group_by(ECO2) %&gt;%
  mutate(ECO2.Score.Leela = cumsum(points.Leela)) %&gt;%
  mutate(ECO2.Score.SF = cumsum(points.SF)) %&gt;%
  mutate(ECO2.total = row_number()) %&gt;%
  mutate(ECO2.draw_ratio = cumsum(points.Leela == points.SF)/ECO2.total) %&gt;%
  mutate(ECO2.wins.Leela = cumsum(results.Leela==&quot;Win&quot;)) %&gt;%
  mutate(ECO2.losses.Leela = cumsum(results.Leela==&quot;Loss&quot;)) %&gt;%
  mutate(ECO2.wins.SF = cumsum(results.SF==&quot;Win&quot;)) %&gt;%
  mutate(ECO2.losses.SF = cumsum(results.SF==&quot;Loss&quot;)) %&gt;%
  mutate(ECO2.Draws = cumsum(results.Leela==&quot;Draw&quot;)) %&gt;%
  mutate(ECO2.win_rate.Leela = ECO2.Score.Leela/ECO2.total) %&gt;%
  mutate(ECO2.elodiff = elo(ECO2.win_rate.Leela)) %&gt;%
  mutate(ECO2.SE = elo(ECO2.win_rate.Leela + denom95(ECO2.win_rate.Leela, ECO2.total))-ECO2.elodiff) %&gt;%
  mutate(ECO2.LOS = LOS(ECO2.total*(1-ECO2.draw_ratio), ECO2.total)) %&gt;%
  mutate(ECO2.LOS2 = LOS2(wins.Leela, losses.Leela)) %&gt;%
  mutate(ECO2.LOS3 = LOS3(wins.Leela, losses.Leela, Draws)) </code></pre>
<p>We can now see the estimated ELO differences at the last of game of each ECO group of openings.</p>
<pre class="r"><code>data2 %&gt;%
  slice(n()) %&gt;% select(Opening, ECO1, starts_with(&quot;ECO2&quot;)) %&gt;% datatable()</code></pre>
<div id="htmlwidget-3" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-3">{"x":{"filter":"none","data":[["1","2","3","4","5"],[90,100,96,94,98],["A61","B45","C13","D02","E98"],["A","B","C","D","E"],[14.5,12.5,12,3.5,11],[11.5,11.5,13,2.5,8],[26,24,25,6,19],[0.730769230769231,0.875,0.8,0.833333333333333,0.736842105263158],[5,2,2,1,4],[2,1,3,0,1],[2,1,3,0,1],[5,2,2,1,4],[19,21,20,5,14],[0.557692307692308,0.520833333333333,0.48,0.583333333333333,0.578947368421053],[40.2680647525453,14.4848690617779,-13.9048425036848,58.4512142712952,55.3210792665126],[152.792194537669,153.913987225884,144.750943006436,null,193.243184551986],[0.968354583883327,0.999968328758167,0.993790334674224,0.99865010196837,0.971283440183998],[0.9101437525605,0.936684771026191,0.936684771026191,0.936684771026191,0.936684771026191],[0.981430221947694,0.982235784940994,0.98213696703261,0.982083733560194,0.982187588069322]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Opening<\/th>\n      <th>ECO1<\/th>\n      <th>ECO2<\/th>\n      <th>ECO2.Score.Leela<\/th>\n      <th>ECO2.Score.SF<\/th>\n      <th>ECO2.total<\/th>\n      <th>ECO2.draw_ratio<\/th>\n      <th>ECO2.wins.Leela<\/th>\n      <th>ECO2.losses.Leela<\/th>\n      <th>ECO2.wins.SF<\/th>\n      <th>ECO2.losses.SF<\/th>\n      <th>ECO2.Draws<\/th>\n      <th>ECO2.win_rate.Leela<\/th>\n      <th>ECO2.elodiff<\/th>\n      <th>ECO2.SE<\/th>\n      <th>ECO2.LOS<\/th>\n      <th>ECO2.LOS2<\/th>\n      <th>ECO2.LOS3<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<p>Here it is very interesting to note that Leela actually performed relatively better in A and E openings. This is interesting because of the nature of the A and E openings. In particular, Jeroen said that E openings are too easy for the current top programs and he considered them very drawish.</p>
<p>We can instead use the <a href="https://CRAN.R-project.org/package=elo"><code>elo</code></a> package instead to calculate the ELO estimates. This package doesn’t have a function for estimating LOS though. The <code>elomod</code> object here is adjusted using a varying <span class="math inline">\(K\)</span> after each round.</p>
<pre class="r"><code>library(elo)
initial &lt;- c(3589, 3587)
names(initial) &lt;- c(&quot;Leela&quot;, &quot;SF&quot;)
elomod &lt;- elo.run(score(points.Leela, points.SF)~White+Black + regress(ECO2, initial, 0.2) + k(20*log(abs(points.Leela - points.SF) + 1)),data = data, initial.elos = initial)
summary(elomod)</code></pre>
<pre><code>## 
## An object of class &#39;elo.run.regressed&#39;, containing information on 2 teams and 100 matches, with 5 regressions.
## 
## Mean Square Error: 0.0506
## AUC: 0.9082
## Favored Teams vs. Actual Wins: 
##        Actual
## Favored  0 0.5  1
##   TRUE   1  36 13
##   (tie)  0   0  0
##   FALSE  6  43  1</code></pre>
<pre class="r"><code>elodf &lt;- as.data.frame(elomod)
elodf$elodiff &lt;- abs(elodf$elo.A - elodf$elo.B)
elodf$actual_wins &lt;- na.omit(data$Score.Leela)
elodf &lt;- elodf %&gt;%
  mutate(exp_wins = cumsum(1 / (1+10^(elodiff/400))))
elodf %&gt;% datatable()</code></pre>
<div id="htmlwidget-4" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-4">{"x":{"filter":"none","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100"],["SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela"],["Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF"],[0.497121800425189,0.502878199574811,0.497121800425189,0.502878199574811,0.497121800425189,0.502878199574811,0.497121800425189,0.502878199574811,0.497121800425189,0.502878199574811,0.477301843037045,0.522698156962955,0.498142293223582,0.501857706776418,0.498142293223582,0.501857706776418,0.478279707187193,0.521720292812808,0.45927273885039,0.54072726114961,0.45927273885039,0.54072726114961,0.45927273885039,0.54072726114961,0.441131274627552,0.558868725372448,0.423852547574472,0.576147452425528,0.423852547574472,0.576147452425528,0.423852547574472,0.576147452425528,0.423852547574472,0.576147452425528,0.423852547574472,0.592576343593089,0.391823846513398,0.608176153486602,0.377026507245575,0.63699912785679,0.349713430899097,0.650286569100903,0.349713430899097,0.662870924424203,0.337129075575797,0.67478798915109,0.32521201084891,0.67478798915109,0.32521201084891,0.67478798915109,0.32521201084891,0.67478798915109,0.32521201084891,0.67478798915109,0.32521201084891,0.67478798915109,0.32521201084891,0.67478798915109,0.32521201084891,0.67478798915109,0.32521201084891,0.650723972730789,0.336714853429319,0.663285146570681,0.336714853429319,0.663285146570681,0.336714853429319,0.663285146570681,0.336714853429319,0.663285146570681,0.336714853429319,0.663285146570681,0.336714853429319,0.663285146570681,0.336714853429319,0.663285146570681,0.336714853429319,0.663285146570681,0.336714853429319,0.663285146570681,0.336714853429319,0.675180244956786,0.313554967021162,0.686445032978838,0.313554967021162,0.686445032978838,0.302885294381053,0.7072234983127,0.283195588512607,0.716804411487393,0.321860505831518,0.678139494168482,0.321860505831518,0.678139494168482,0.345340055442797,0.654659944557203,0.374262940271462,0.625737059728538,0.398077999220197,0.601922000779803],[0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,1,0.5,0,0.5,0.5,0.5,1,0.5,1,0.5,0.5,0.5,0.5,0.5,1,0.5,1,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0,1,0.5,1,0,1,0.5,0.5,0,0.5,0,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,1,1,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0,1,0.5,0.5,0.5,1,0,1,0.5,0.5,0.5,0.5,0.5,1,0.5,0.5,0.5,0.5,0.5,0.5],[0,-0,0,-0,0,-0,0,-0,0,6.89157148719207,0,-7.24613507565505,0,-0,0,6.90571852131183,0,6.63036461111677,0,-0,0,-0,0,6.36687208084384,0,6.11537798529806,0,-0,0,-0,0,-0,0,-0,-5.8758439664879,5.64809117463749,0,5.43183188973828,-5.22669720987268,5.03226062133734,0,-0,-4.84805757263308,-0,-4.67360136440289,-0,0,-0,0,-0,0,-0,0,-0,0,-0,0,-0,0,-0,9.35454784311585,4.84199387077664,0,-0,0,-0,0,-0,0,-0,0,-0,0,-0,0,-0,0,-0,0,-0,-4.66785902614375,4.50295794796752,0,-0,0,4.34679482682571,-4.19888175666591,4.05874413357512,0,-0,0,-0,0,4.4619340430143,0,-0,0,-0,0,-0],[3587,3589,3587,3589,3587,3589,3587,3589,3587,3595.89157148719,3580.10842851281,3588.64543641154,3587.35456358846,3588.64543641154,3587.35456358846,3595.55115493285,3580.44884506715,3602.18151954397,3573.81848045603,3602.18151954397,3573.81848045603,3602.18151954397,3573.81848045603,3608.54839162481,3567.45160837519,3614.66376961011,3561.33623038989,3614.66376961011,3561.33623038989,3614.66376961011,3561.33623038989,3614.66376961011,3561.33623038989,3614.66376961011,3555.4603864234,3626.18770475123,3549.81229524877,3631.61953664097,3539.15376614916,3641.87849447218,3534.12150552782,3641.87849447218,3529.27344795519,3646.72655204481,3524.59984659078,3651.40015340922,3524.59984659078,3651.40015340922,3524.59984659078,3651.40015340922,3524.59984659078,3651.40015340922,3524.59984659078,3651.40015340922,3524.59984659078,3651.40015340922,3524.59984659078,3651.40015340922,3524.59984659078,3651.40015340922,3533.9543944339,3646.88759943688,3529.11240056312,3646.88759943688,3529.11240056312,3646.88759943688,3529.11240056312,3646.88759943688,3529.11240056312,3646.88759943688,3529.11240056312,3646.88759943688,3529.11240056312,3646.88759943688,3529.11240056312,3646.88759943688,3529.11240056312,3646.88759943688,3529.11240056312,3646.88759943688,3524.44454153698,3656.05841641099,3519.94158358901,3656.05841641099,3519.94158358901,3660.40521123781,3511.39590700552,3668.66283712806,3507.33716287194,3668.66283712806,3523.26973029756,3652.73026970244,3523.26973029756,3657.19220374546,3532.44623700363,3643.55376299637,3543.35698960291,3632.64301039709,3552.08559168233,3623.91440831767],[3589,3587,3589,3587,3589,3587,3589,3587,3589,3580.10842851281,3595.89157148719,3587.35456358846,3588.64543641154,3587.35456358846,3588.64543641154,3580.44884506715,3595.55115493285,3573.81848045603,3602.18151954397,3573.81848045603,3602.18151954397,3573.81848045603,3602.18151954397,3567.45160837519,3608.54839162481,3561.33623038989,3614.66376961011,3561.33623038989,3614.66376961011,3561.33623038989,3614.66376961011,3561.33623038989,3614.66376961011,3561.33623038989,3620.5396135766,3549.81229524877,3626.18770475123,3544.38046335903,3636.84623385084,3534.12150552782,3641.87849447218,3534.12150552782,3646.72655204481,3529.27344795519,3651.40015340922,3524.59984659078,3651.40015340922,3524.59984659078,3651.40015340922,3524.59984659078,3651.40015340922,3524.59984659078,3651.40015340922,3524.59984659078,3651.40015340922,3524.59984659078,3651.40015340922,3524.59984659078,3651.40015340922,3524.59984659078,3642.0456055661,3529.11240056312,3646.88759943688,3529.11240056312,3646.88759943688,3529.11240056312,3646.88759943688,3529.11240056312,3646.88759943688,3529.11240056312,3646.88759943688,3529.11240056312,3646.88759943688,3529.11240056312,3646.88759943688,3529.11240056312,3646.88759943688,3529.11240056312,3646.88759943688,3529.11240056312,3651.55545846302,3519.94158358901,3656.05841641099,3519.94158358901,3656.05841641099,3515.59478876219,3664.60409299448,3507.33716287194,3668.66283712806,3507.33716287194,3652.73026970244,3523.26973029756,3652.73026970244,3518.80779625454,3643.55376299637,3532.44623700363,3632.64301039709,3543.35698960291,3623.91440831767,3552.08559168233],[2,2,2,2,2,2,2,2,2,15.7831429743837,15.7831429743837,1.2908728230741,1.2908728230741,1.2908728230741,1.2908728230741,15.1023098656979,15.1023098656979,28.3630390879316,28.3630390879316,28.3630390879316,28.3630390879316,28.3630390879316,28.3630390879316,41.096783249619,41.096783249619,53.3275392202149,53.3275392202149,53.3275392202149,53.3275392202149,53.3275392202149,53.3275392202149,53.3275392202149,53.3275392202149,53.3275392202149,65.0792271531909,76.375409502466,76.375409502466,87.2390732819422,97.6924677016877,107.756988944362,107.756988944362,107.756988944362,117.453104089628,117.453104089628,126.800306818434,126.800306818434,126.800306818434,126.800306818434,126.800306818434,126.800306818434,126.800306818434,126.800306818434,126.800306818434,126.800306818434,126.800306818434,126.800306818434,126.800306818434,126.800306818434,126.800306818434,126.800306818434,108.091211132202,117.775198873755,117.775198873755,117.775198873755,117.775198873755,117.775198873755,117.775198873755,117.775198873755,117.775198873755,117.775198873755,117.775198873755,117.775198873755,117.775198873755,117.775198873755,117.775198873755,117.775198873755,117.775198873755,117.775198873755,117.775198873755,117.775198873755,127.110916926043,136.116832821977,136.116832821977,136.116832821977,136.116832821977,144.810422475629,153.20818598896,161.325674256111,161.325674256111,161.325674256111,129.460539404889,129.460539404889,129.460539404889,138.384407490918,111.107525992734,111.107525992734,89.2860207941867,89.2860207941867,71.8288166353495,71.8288166353495],[0.5,1,1.5,2,2.5,3,3.5,4,4.5,5.5,6,6,6.5,7,7.5,8.5,9,10,10.5,11,11.5,12,12.5,13.5,14,15,15.5,16,16.5,17,17.5,18,18.5,19,19,20,20.5,21.5,21.5,22.5,23,23.5,23.5,24,24,24.5,25,25.5,26,26.5,27,27.5,28,28.5,29,29.5,30,30.5,31,31.5,32.5,33.5,34,34.5,35,35.5,36,36.5,37,37.5,38,38.5,39,39.5,40,40.5,41,41.5,42,42.5,42.5,43.5,44,44.5,45,46,46,47,47.5,48,48.5,49,49.5,50.5,51,51.5,52,52.5,53,53.5],[0.497121800425189,0.994243600850378,1.49136540127557,1.98848720170076,2.48560900212595,2.98273080255113,3.47985260297632,3.97697440340151,4.4740962038267,4.95139804686375,5.42869988990079,5.92684218312437,6.42498447634796,6.92312676957154,7.42126906279512,7.89954876998231,8.37782847716951,8.8371012160199,9.29637395487029,9.75564669372068,10.2149194325711,10.6741921714215,11.1334649102718,11.5745961848994,12.0157274595269,12.4395800071014,12.8634325546759,13.2872851022504,13.7111376498248,14.1349901973993,14.5588427449738,14.9826952925483,15.4065478401227,15.8304003876972,16.2378240441041,16.6296478906175,17.0214717371309,17.3984982443765,17.7614991165197,18.1112125474188,18.4609259783179,18.810639409217,19.1477684847928,19.4848975603686,19.8101095712175,20.1353215820664,20.4605335929153,20.7857456037642,21.1109576146131,21.436169625462,21.7613816363109,22.0865936471599,22.4118056580088,22.7370176688577,23.0622296797066,23.3874416905555,23.7126537014044,24.0378657122533,24.3630777231022,24.6882897339511,25.0375657612203,25.3742806146497,25.710995468079,26.0477103215083,26.3844251749376,26.7211400283669,27.0578548817963,27.3945697352256,27.7312845886549,28.0679994420842,28.4047142955135,28.7414291489429,29.0781440023722,29.4148588558015,29.7515737092308,30.0882885626601,30.4250034160894,30.7617182695188,31.0984331229481,31.4351479763774,31.7599677314206,32.0735226984418,32.3870776654629,32.7006326324841,33.0141875995053,33.3170728938863,33.6098493955736,33.8930449840862,34.1762405725988,34.4594361611114,34.781296666943,35.1031571727745,35.425017678606,35.7357699564695,36.0811100119123,36.4264500673551,36.8007130076265,37.174975947898,37.5730539471182,37.9711319463384]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>team.A<\/th>\n      <th>team.B<\/th>\n      <th>p.A<\/th>\n      <th>wins.A<\/th>\n      <th>update<\/th>\n      <th>elo.A<\/th>\n      <th>elo.B<\/th>\n      <th>elodiff<\/th>\n      <th>actual_wins<\/th>\n      <th>exp_wins<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[3,4,5,6,7,8,9,10]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<p>Let us now investigate the evals.</p>
<pre class="r"><code>data_df &lt;- data %&gt;% gather(color, engine, White:Black)</code></pre>
<pre class="r"><code>data_dfwhite &lt;- data_df %&gt;%
  filter(color == &quot;White&quot;) %&gt;%
  group_by(engine) %&gt;%
  gather(evalengines, evals, Leela.openeval:SF.openeval) %&gt;%
  mutate(evalengines = str_remove(evalengines, &quot;.openeval&quot;)) %&gt;%
  group_by(ECO2, evalengines) %&gt;%
  summarize(mean = round(mean(evals),3), sd = round(sd(evals)))
data_dfwhite %&gt;% datatable()</code></pre>
<div id="htmlwidget-5" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-5">{"x":{"filter":"none","data":[["1","2","3","4","5","6","7","8","9","10"],["A","A","B","B","C","C","D","D","E","E"],["Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF"],[1.033,0.614,0.807,0.456,0.192,0.106,0.735,0.358,0.878,0.633],[0,0,1,0,1,1,0,0,0,0]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>ECO2<\/th>\n      <th>evalengines<\/th>\n      <th>mean<\/th>\n      <th>sd<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[3,4]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code>data_df %&gt;%
  filter(color == &quot;White&quot;) %&gt;%
  group_by(engine) %&gt;%
  gather(evalengines, evals, Leela.openeval:SF.openeval) %&gt;%
  mutate(evalengines = str_remove(evalengines, &quot;.openeval&quot;)) %&gt;%
  ggplot(aes(evals, color = evalengines)) + 
  geom_density() +
  facet_wrap(~ECO2+engine)</code></pre>
<p><img src="/post/2018-05-28_elo_compute_files/figure-html/unnamed-chunk-11-1.png" width="768" /></p>
<pre class="r"><code>data_dfblack &lt;- data_df %&gt;%
  filter(color == &quot;Black&quot;) %&gt;%
  group_by(engine) %&gt;%
  gather(evalengines, evals, Leela.openeval:SF.openeval) %&gt;%
  mutate(evalengines = str_remove(evalengines, &quot;.openeval&quot;)) %&gt;%
  group_by(ECO2, evalengines) %&gt;%
  summarize(mean = round(mean(evals),3), sd = round(sd(evals)))
data_dfblack %&gt;% datatable()</code></pre>
<div id="htmlwidget-6" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-6">{"x":{"filter":"none","data":[["1","2","3","4","5","6","7","8","9","10"],["A","A","B","B","C","C","D","D","E","E"],["Leela","SF","Leela","SF","Leela","SF","Leela","SF","Leela","SF"],[1.033,0.614,0.807,0.456,0.192,0.106,0.735,0.358,0.878,0.633],[0,0,1,0,1,1,0,0,0,0]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>ECO2<\/th>\n      <th>evalengines<\/th>\n      <th>mean<\/th>\n      <th>sd<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[3,4]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code>data_df %&gt;%
  filter(color == &quot;Black&quot;) %&gt;%
  group_by(engine) %&gt;%
  gather(evalengines, evals, Leela.openeval:SF.openeval) %&gt;%
  mutate(evalengines = str_remove(evalengines, &quot;.openeval&quot;)) %&gt;%
  ggplot(aes(evals, color = evalengines)) + 
  geom_density() +
  facet_wrap(~ECO2+engine)</code></pre>
<p><img src="/post/2018-05-28_elo_compute_files/figure-html/unnamed-chunk-13-1.png" width="768" /></p>
<p>We can see that Leela’s opening evals are generally more optimistic than that of Stockfish, which can be attributed partly to SF’s contempt. But a closer inspection of Leela’s evals, we see that they are consistent even if playing as different colors. Leela also tends to win in openings where its opening evals are visibly more optimistic than that of Stockfish, signifying that Leela has better opening evaluation.</p>

    </div>
  </article>

  


</main>

      <footer class="footer">
        <ul class="footer-links">
          <li>
            <a href="/index.xml" type="application/rss+xml" target="_blank">RSS feed</a>
          </li>
          <li>
            <a href="https://gohugo.io/" class="footer-links-kudos">Made with <img src="/images/hugo-logo.png" alt="Img link to Hugo website" width="22" height="22"></a>
          </li>
        </ul>
      </footer>

    </div>
    



<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>



<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/r.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/yaml.min.js"></script>
<script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>



    
<script src="/js/math-code.js"></script>
<script async src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>


    
  </body>
</html>

